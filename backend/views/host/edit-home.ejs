<%- include('../partials/head') %>
</head>
<body>
<%- include('../partials/nav') %>
    <div class="container mx-auto px-6 py-12">
      <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-red-600 mb-8 text-center">
          <%= editing ? 'Edit Your Property' : 'Add New Property' %>
        </h1>
        
        <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100">
          <div class="p-8">
            <form action="/host/<%= editing ? 'edit-home/' + home._id : 'add-home' %>" method="POST" enctype="multipart/form-data" class="space-y-6">
              <input type="hidden" name="id" value="<%= editing ? home._id : '' %>">
              
              <!-- Property Name -->
              <div>
                <label class="block text-gray-700 font-semibold mb-2">Property Name *</label>
                <input
                  type="text"
                  name="houseName"
                  value="<%= editing ? home.houseName : '' %>"
                  placeholder="Enter your property name"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition duration-300"/>
              </div>
              
              <!-- Price and Rating Row -->
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label class="block text-gray-700 font-semibold mb-2">Price Per Night (Rs) *</label>
                  <input
                    type="number"
                    name="price"
                    value="<%= editing ? home.price : '' %>"
                    placeholder="Enter price per night"
                    required
                    min="0"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition duration-300"/>
                </div>
                <div>
                  <label class="block text-gray-700 font-semibold mb-2">Rating (1-5) *</label>
                  <select
                    name="rating"
                    required
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition duration-300">
                    <option value="">Select rating</option>
                    <% for(let i = 1; i <= 5; i++) { %>
                      <option value="<%= i %>" <%= editing && home.rating == i ? 'selected' : '' %>><%= i %> Star<%= i > 1 ? 's' : '' %></option>
                    <% } %>
                  </select>
                </div>
              </div>
              
              <!-- Location -->
              <div>
                <label class="block text-gray-700 font-semibold mb-2">Location *</label>
                <input
                  type="text"
                  name="houseLocation"
                  value="<%= editing ? (home.houseLocation || '') : '' %>"
                  placeholder="Enter property location"
                  required
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition duration-300"/>
              </div>
              
              <!-- Property Image -->
              <div>
                <label class="block text-gray-700 font-semibold mb-2">Property Image *</label>
                <% if (editing && home.houseImage) { %>
                  <div class="mb-4 p-4 bg-gray-50 rounded-lg">
                    <p class="text-sm text-gray-600 mb-2">Current image:</p>
                    <img src="/<%= home.houseImage %>" alt="Current image" 
                         class="h-48 w-full object-cover rounded-lg border border-gray-200"
                         onerror="this.onerror=null; this.src='/images/no-image.png'">
                  </div>
                <% } %>
                <input
                  type="file"
                  name="houseImage"
                  accept="image/jpeg, image/jpg, image/png, image/gif"
                  <%= !editing ? 'required' : '' %>
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition duration-300 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-red-50 file:text-red-700 hover:file:bg-red-100"/>
                <p class="text-xs text-gray-500 mt-2">
                  <% if (editing) { %>
                    Leave empty to keep current image. 
                  <% } %>
                  Supported formats: JPEG, PNG, GIF (Max 5MB)
                </p>
              </div>
              
              <!-- Description -->
              <div>
                <label class="block text-gray-700 font-semibold mb-2">Description</label>
                <textarea
                  name="description"
                  placeholder="Describe your property..."
                  rows="4"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition duration-300 resize-vertical"
                ><%= editing ? home.description : '' %></textarea>
              </div>
              
              <!-- Submit Button -->
              <div class="flex justify-center pt-4">
                <button type="submit" 
                        class="bg-red-500 text-white py-3 px-8 rounded-lg font-semibold text-lg hover:bg-red-600 transition duration-300 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 shadow-lg hover:shadow-xl">
                  <%= editing ? 'Update Property' : 'Add Property' %>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <%- include('../partials/footer') %>
</body>
</html>